---
title: 前后端分离模式下的接口管理实践
date: 2019-07-02 10:08:08
tags:
  - 前端
categories:
  - 前端
---

> 简介：本文分析了前后端分离开发模式下，由于接口交互，导致的前后端不能同步开发的问题，以及提出了一种综合解决方案，优化接口交互流程，提高开发效率。

目前，随着 MVVM 框架的广泛应用，前后端分离的开发模式越来越得到广大开发者的青睐。前后端分离开发，就是后端人员负责写后台业务逻辑，前端人员通过 webpack 等打包工具，开发前端页面，两者通过接口来交换数据。页面由前端根据接口数据来进行渲染，而不是通过后端来渲染。

这种开发模式，可以使前后端并行开发，各司其职，既提高了项目总体的开发效率，也让不同的角色发挥自己的特长，前后端人员更专注于自己的职责，项目总体质量也能得到提高。

## 前后端通过接口交互，有哪些问题？

### <span style="color:#d35400">问题 1：依赖后端接口，前端无法独立开发</span>

分离后，前后端沟通的最重要一个环节是接口交互。假定有一个需求，开发一个显示用户信息的页面。在后端提供接口之前，前端是不知道后端的接口会返回什么格式的数据，不知道以哪个字段来获取需要的数据，因此，前端无法开发页面的逻辑，特别是现在的 MVVM 框架，由数据驱动页面，在没有数据的情况下，前端工作的进度会取决于后端提供接口的进度，违背了前后端分离开发的愿景。

### <span style="color:#d35400">问题 2：后端提供接口文档，前端需要写模拟数据</span>

在后端提供接口文档以后，假定文档定义获取用户信息的接口如下：

```javascript
// 接口路径： /getUserInfo
// 接口参数：
{
  id: 123;
}
// 返回数据
{
  "name":"张三",
  "id":123,
  "role":"admin"
}
```

拿到上述文档后，由于此时后端还没有开发对应的接口，导致前端无法连接后端服务器，获取数据。这时候，前端为了写逻辑，由于接口无法调通，只能自己依据接口文档，构造模拟数据。等到联调阶段，还需要把构造的模拟数据删掉，这些构造的模拟数据，上线后是完全没用的，这就是一种工作量的浪费。

### <span style="color:#d35400">问题 3：后端做接口测试，需要依赖 postman 等测试工具</span>

当后端开发，完成了一个接口后，需要对接口做接口测试。如果这时候页面还没有完成，后端只能依据接口文档，在 postman 上面构造模拟数据，然后通过 postman 调用自己的接口，查看返回的数据。通过对比返回的数据和接口文档定义的返回数据，知道自己的后端是否按照文档返回了数据。这个过程中，在 postman 上定义模拟数据是一种工作量，人眼对比数据，也是一种工作量，开发效率大大降低。

### <span style="color:#d35400">问题 4：接口是否已经完成，接口是否有问题，需要前后端频繁沟通</span>

由于接口文档更新不及时，以及无法保证团队的每一个成员手上的接口文档都是最新版本，甚至是，实际开发过程中接口已经变化，但是没有更新文档，只是口头交流，都会导致团队成员开发或者沟通出错，导致返工的问题，甚至是引起团队矛盾：**为什么接口变化了不通知我？**
